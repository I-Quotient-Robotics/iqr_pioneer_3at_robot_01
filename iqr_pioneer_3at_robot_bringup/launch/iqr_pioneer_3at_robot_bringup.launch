<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <!-- Load URDF file -->
  <param name="robot_description" command="$(find xacro)/xacro.py '$(find iqr_pioneer_3at_robot_description)/urdf/p3at_phantomx_kinect.urdf.xacro'" />

  <!-- Load robot driver -->
  <node name="RosAria" pkg="rosaria" type="RosAria" output="screen">
    <param name="port" value="/dev/pioneer3at" />
    <remap from="/RosAria/pose" to="/odom"/>
    <remap from="/RosAria/cmd_vel" to="/cmd_vel"/>
  </node>

  <!-- Load pan_tilt driver -->
  <node name="iqr" pkg="pan_tilt_driver" type="PanTiltDriverNode" output="screen">
    <param name="port_name" value="/dev/ttyUSB_TILT"/>
    <param name="yaw_joint_name" value="pan_tilt_yaw_joint"/>
    <param name="pitch_joint_name" value="pan_tilt_pitch_joint"/>
  </node>

  <!-- Load phantomx_rector_arm driver -->
  <node name="arbotix" pkg="arbotix_python" type="arbotix_driver" output="screen">
    <rosparam file="$(find phantomx_reactor_arm_controller)/config/arbotix_config_phantomx_no_wrist.yaml" command="load" />
  </node>

  <!-- Load Kinect v2 bridge driver -->
  <include file = "$(find kinect2_bridge)/launch/kinect2_bridge.launch">
    <arg name="base_name"         value="kinect_v2"/>
    <arg name="publish_tf"        value="true"/>
  </include>
  
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher">
      <param name="publish_frequency" type="double" value="30.0" />
  </node>

  <!-- <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" /> -->

  <!-- Show in Rviz   -->
  <node name="rviz" pkg="rviz" type="rviz"/> 

</launch>
